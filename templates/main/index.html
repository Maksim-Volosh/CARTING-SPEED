{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Karting</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Tailwind CSS -->
  <link href="{% static "css/main/main.css" %}" rel="stylesheet">
  <link href="{% static "css/main/output.css" %}" rel="stylesheet">
  <link href="{% static 'img/main/simple logo.jpg' %}" rel="icon" type="image/x-icon">
</head>
<body class="black">
<main class="main-page m-auto">
  <div>

      <div class="start relative z-2">
        <div class="wrapper relative z-10 flex flex-col">
          <header class="header flex justify-between py-8 px-4">
            <div class="header__logo flex justify-center items-center gap-4">
              <div class="karting-head pic"></div>
              <h2 class="news__head head head2 text-2xl uppercase">
                Karting speed
              </h2>
            </div>
            <div class="navbar flex font-formula1 px-16 py-1.2 items-center gap-x-10 text-xl">
              <p class="navbar__link">corporate</p>
              <p class="navbar__link">services</p>
              <p class="navbar__link">our team</p>
              <p class="navbar__link">about us</p>
            </div>
          </header>

          <div class="start__info flex gap-5 self-end pr-6">
            <div class="flex flex-col items-center gap-6">
              <div class="start__link youtube-icon message-icon pic"></div>
              <p class="start__language font-formula1 text-xl">Tur</p>
            </div>
            <div class="flex flex-col items-center gap-6">
              <div class="start__link facebook-icon message-icon pic"></div>
              <p class="start__language font-formula1 text-xl">Ru</p>
            </div>
            <div class="flex flex-col items-center gap-6">
              <div class="start__link inst-icon message-icon pic"></div>
              <p class="start__language font-formula1 text-xl">Eng</p>
            </div>
          </div>

          <div class="start__event event flex flex-col max-w-2xl w-full mt-44">
            <div class="event__info flex w-full pr-6 py-1">
              <div class="flex flex-col ml-auto max-w-60 w-full">
              <p class="font-formula1 uppercase text-xs">next event</p>
              <p class="link underline text-xl">2024 Chinese Grand Prix</p>
              </div>
            </div>
            <div class="event__countdown mr-5 countdown w-[97%] py-3" id="countdown">
              <div class="flex justify-center gap-2 font-formula1">
                <img class="mr-5" src="/static/img/main/tag-heuer.svg" alt="Image 7">
                <div class="countdown__item">
                  <span id="countdown__days">1</span>
                  <small>DAYS</small>
                </div>
                <div class="countdown__item">
                  <span id="countdown__hours">12</span>
                  <small>HOURS</small>
                </div>
                <div class="countdown__item">
                  <span id="countdown__mins">31</span>
                  <small>MINS</small>
                </div>
                <div class="countdown__item">
                  <span id="countdown__secs">31</span>
                  <small>SECS</small>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="blackout_blue h-2/5 absolute bottom-0 w-full"></div>

        <div class="start__bottom event__bar flex font-formula1 text-sm">
          <div class="event__bar_content flex font-formula1 text-sm m-auto mt-4 pl-36 gap-8">
            <div class="event__item max-w-44 w-full">
              <div class="event__line"></div>
              <p>Team Tales: 2009 China Grand Prix</p>
            </div>
            <div class="event__item max-w-44 w-full">
              <div class="event__line"></div>
              <p>Team Tales: 2009 China Grand Prix</p>
            </div>
          </div>
        </div>
        </div>

      <div class="info custom-gradient">
        <div class="rating pl-20 pr-24 pt-16">
          <div class="wrapper">
            <h2 class="head head_left-line text-6xl mb-[2rem]">Rating</h2>

            <div class="rating__content flex justify-between">

              <div class="rating__table w-[45%] font-formula1 grid flex-col items-center">
                <table class="bg-inherit table-auto w-full">
                  <thead class="thead-light h-[4.2rem]">
                  <tr>
                    <th scope="col m-auto" class="w-[15%]"></th>
                    <th scope="col" class="text-center">NAME</th>
                    <th scope="col" class="text-center">COUNTRY</th>
                    <th scope="col" class="text-center">TEAM</th>
                    <th scope="col" class="text-center">SCORE</th>
                  </tr>
                  </thead>
                  <tbody>
                  <!-- If we don't have an event -->
                  {% if not event or not statistic %}
                  <tr class="h-[9rem]">
                    <th scope="row" class="w-[126px]">1</th>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                  </tr>
                  <tr class="h-[9rem]">
                    <th scope="row" class="w-[126px]">2</th>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                  </tr>
                  <tr class="h-[9rem]">
                    <th scope="row" class="w-[126px]">3</th>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                    <td class="w-[180px]"></td>
                  </tr>
                  {% else %}
                  <!-- If we have an event - we init an statistic -->
                  {% for stat in statistic %}
                  <tr class="h-[9rem]">
                    <th scope="row" class="w-[126px]">{{ forloop.counter }}</th>
                    <td class="w-[180px] text-center"> {{ stat.player__name }}</td>
                    <td class="w-[180px] text-center"> {{ stat.player__nationality }}</td>
                    <td class="w-[180px] text-center"> {{ stat.lap_time }}s</td>
                    <td class="w-[180px] text-center"> {{ stat.points }}</td>
                  </tr>
                  {% endfor %}
                  {% endif %}
                  </tbody>
                </table>
                <button class="uppercase button explore-btn justify-self-center" onClick={explore}>Explore</button>
              </div>

              <div class="lane bg-[#FCD700]"></div>

              <div class="flex flex-col gap-9">
                <div class="contact-us">
                  <div class="contact-us__content">
                    <h2 class="head head2 head_left-line text-3xl mb-6">
                      Contact Us
                    </h2>

                    <!-- Notification about successful sent email -->
                    {% if messages %}
                    <div class="alert alert-success">
                      {% for message in messages %}
                      <p>{{ message }}</p>
                      {% endfor %}
                    </div>
                    {% endif %}

                    <div class="card-body font-formula1 bg-[#0D3242] p-4 rounded-3xl max-w-xs">
                      <form class="flex flex-col gap-2" method="post" action="{% url 'send_email' %}">
                        {% csrf_token %}
                        <div class="form-group">
                          <label for="email">Your email</label>
                          <input type="email" class="form__control bg-inherit" id="email" name="email"
                                 placeholder="Enter your email" required/>
                        </div>
                        <div class="form-group">
                          <label for="message">Your text</label>
                          <textarea class="form__control h-[200px] bg-inherit text-white" id="message" name="message"
                                    rows="3" placeholder="Enter your message" required></textarea>
                        </div>
                        <button type="submit" class="button rounded-lg mt-[12px] text-xl" onClick={sendMessage}>Send
                          message
                        </button>
                      </form>
                    </div>
                  </div>

                </div>
                <div class="video-frame">
                  <video class="" width="320" height="220" controls>
                    Your browser does not support the video tag.
                  </video>
                </div>
              </div>
            </div>
          </div>
        </div>


        <section class="partners px-9 pt-16">
          <div class="wrapper">
            <h2 class="partners__head text-center mb-12 head head_bottom-line text-4xl" id="partners"> Partners </h2>
            <div class="partners__content flex justify-evenly flex-wrap">
              {% if partners %} <!-- If partners > 0: show partners. else: show the partner stub -->
                {% for partner in partners %}
                  <div class="partners__frame">
                    <!-- If partner site url == True: show url and open url on the blank page. else: show partner block on the current page -->
                    <a 
                    {% if partner.url %} 
                      target="_blank" rel="noopener noreferrer" href="{{ partner.url }}"
                    {% else %}
                      href="#partners"
                    {% endif %}>
                    <img src="{{ partner.logo.url }}" alt="{{ partner.name }}"></a>
                  </div>
                {% endfor %}
              {% else %}
                <div class="partners__frame">
                  <img src="/static/img/main/partner1.png" alt="Image">
                </div>
              {% endif %}
            </div>
          </div>
        </section>

        <section class="news py-20">
          <div class="wrapper">
            <h2 class="news__head head head2 head_left-line text-3xl mb-12 pl-24">
              Last News
            </h2>
            <div class="news__wrapper h-60 flex ">
              <div class="news__content bg-[#EADF20] pl-24 py-1.5 pr-2 flex h-full gap-5 ">
              {% for news in news %}
                <div class="news__item flex flex-col text-center" >
                  <div class="news__frame bg-white h-[82%] w-full pic" style=" background-image: url('{{ news.image.url }}')"></div>
                  <button class="news__explore-btn uppercase button">Explore</button>
                </div>
              {% endfor %}
            </div>
              <div class="news__stripes h-full flex-1"></div>
            </div>
          </div>
        </section>

        <section class="gallery py-20">
          <div class="wrapper">
            <h2 class="news__head head head2 head_left-line text-3xl mb-12 pl-24">
              gallery
            </h2>
            <div class="gallery__photos">
            </div>
          </div>
        </section>

        </div>
      </div>
    </div>
</main>

</body>
</html>
